cluster:
  network:
    cni:
      name: custom
      urls:
        - https://raw.githubusercontent.com/Jubblin/talos-cilium/main/templates/cilium/1.18.3/cilium.yaml
  proxy:
    disabled: true
  extraManifests:
    - https://raw.githubusercontent.com/alex1989hu/kubelet-serving-cert-approver/main/deploy/standalone-install.yaml
    - https://github.com/kubernetes-sigs/metrics-server/releases/latest/download/components.yaml
    # - https://raw.githubusercontent.com/cilium/cilium/refs/heads/main/examples/kubernetes/addons/prometheus/monitoring-example.yaml
    - https://raw.githubusercontent.com/Jubblin/talos-cilium/main/templates/tetragon/1.6.0/tetragon.yaml
    - https://github.com/controlplaneio-fluxcd/flux-operator/releases/latest/download/install.yaml
  apiServer:
    admissionControl:
      - name: PodSecurity # Name is the name of the admission controller.
          # Configuration is an embedded configuration object to be used as the plugin's
        configuration:
          apiVersion: pod-security.admission.config.k8s.io/v1alpha1
          defaults:
            audit: restricted
            audit-version: latest
            enforce: baseline
            enforce-version: latest
            warn: restricted
            warn-version: latest
          exemptions:
            namespaces:
              - kube-system
              - akri-system
            runtimeClasses: []
            usernames: []
          kind: PodSecurityConfiguration
